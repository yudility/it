# ğŸ« ì‡(it)ë‹¤ - êµë‚´ ì§€ë¦„ê¸¸ ì°¾ê¸° ì„œë¹„ìŠ¤

**ì´í™”í†¤(Ewha-thon) í•´ì»¤í†¤ í”„ë¡œì íŠ¸** | 2024.03.16 ~ 2024.03.18 (2ì¼)

## ğŸ“‹ **ì„œë¹„ìŠ¤ ê°œìš”**
ë„ë³´ ìœ„ì£¼ì˜ êµë‚´ ì§€ë¦„ê¸¸ì„ ì•Œë ¤ì£¼ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ê¸°ì¡´ ì§€ë„ ì„œë¹„ìŠ¤ë“¤ì´ ì°¨ëŸ‰ ë„ë¡œ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„ë˜ì–´ ì‹¤ì œ ë„ë³´ë¡œ ì´ìš©í•  ìˆ˜ ìˆëŠ” ê±´ë¬¼ ê°„ ì—°ê²°í†µë¡œë‚˜ ì§€ë¦„ê¸¸ì„ ì œëŒ€ë¡œ ë°˜ì˜í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì œì‘í–ˆìŠµë‹ˆë‹¤.

## ğŸ› ï¸ **ì‚¬ìš©ê¸°ìˆ **
* `Java 21`, `Spring Boot 3.2.3`, `Spring Data JPA`, `MariaDB`, `JGraphT 1.0.1`, `Lombok`

## ğŸ—ï¸ **ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜**

### í•µì‹¬ ì—”í‹°í‹° êµ¬ì¡°
```
Building (ê±´ë¬¼) â†â†’ Vertex (ìœ„ì¹˜ ë…¸ë“œ) â†â†’ Edge (ê²½ë¡œ ê°„ì„ )
                                      â†“
                              InnerVertex (ìƒì„¸ ê²½ë¡œ)
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸
- **EdgeService**: ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ ìµœë‹¨ ê²½ë¡œ ê³„ì‚°
- **GraphController**: ê²½ë¡œ ê²€ìƒ‰ ë° ê±´ë¬¼ ì¡°íšŒ API
- **Repository Layer**: JPA ê¸°ë°˜ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ

## ğŸ”§ **ê¸°ìˆ ì  ë¬¸ì œ í•´ê²°**

**- 2ì¼ ë‚´ ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ êµë‚´ ìµœì  ê²½ë¡œ ì„œë¹„ìŠ¤ ì™„ì„±**

**ë¬¸ì œ ìƒí™©:**
* **ë‹¨ 2ì¼ì´ë¼ëŠ” ê·¹ë„ë¡œ ì œí•œëœ ì‹œê°„** ë‚´ ìµœì  ê²½ë¡œ ì„œë¹„ìŠ¤ êµ¬í˜„ í•„ìš”

**í•´ê²° ê³¼ì •:**
* **êµë‚´ ì‹œì„¤ì„ ë…¸ë“œë¡œ, ë„ë³´ ê²½ë¡œë¥¼ ì—£ì§€ë¡œ í•˜ëŠ” ê·¸ë˜í”„ êµ¬ì¡° ì„¤ê³„**
* **ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ ì ìš©**í•˜ì—¬ ìµœì  ë„ë³´ ê²½ë¡œ ê³„ì‚° ì‹œìŠ¤í…œ êµ¬í˜„
* JPAë¥¼ í™œìš©í•œ êµë‚´ ê±´ë¬¼, ê²½ë¡œ, ì—°ê²°ì  ì •ë³´ íš¨ìœ¨ì  ëª¨ë¸ë§
* JGraphT ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ WeightedMultigraph í™œìš©í•œ ê·¸ë˜í”„ êµ¬í˜„

**í•µì‹¬ ì•Œê³ ë¦¬ì¦˜:**
```java
// ê·¸ë˜í”„ êµ¬ì„± ë° ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ ì ìš©
WeightedMultigraph<Long, CustomWeightEdge> graph = new WeightedMultigraph<>(CustomWeightEdge.class);
DijkstraShortestPath<Long, CustomWeightEdge> shortestPath = new DijkstraShortestPath<>(graph);
GraphPath<Long, CustomWeightEdge> path = shortestPath.getPath(start.getId(), end.getId());
```

**ê²°ê³¼:**
* ì§§ì€ ê¸°ê°„ì—ë„ ë¶ˆêµ¬í•˜ê³  **ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥í•œ ìˆ˜ì¤€ì˜ MVP ì„œë¹„ìŠ¤ ì™„ì„±**
* ì‹œê°„ ê¸°ë°˜ ê°€ì¤‘ì¹˜ë¥¼ ê³ ë ¤í•œ ìµœì  ê²½ë¡œ ì œê³µ
* ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ ì‹¤ìš©ì  ì†”ë£¨ì…˜ êµ¬í˜„ ê²½í—˜

## ğŸš€ **ì£¼ìš” ê¸°ëŠ¥**

### 1. ìµœì  ê²½ë¡œ ì°¾ê¸°
```http
GET /route/find?start={ì¶œë°œì§€}&end={ë„ì°©ì§€}
```
- ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ ìµœë‹¨ ê²½ë¡œ ê³„ì‚°
- ì‹œê°„ ê¸°ë°˜ ê°€ì¤‘ì¹˜ ì ìš©
- ë„ë³´ ë° ë²„ìŠ¤ ê²½ë¡œ í†µí•© ê³ ë ¤

### 2. ê±´ë¬¼ ê²€ìƒ‰
```http
GET /point/find?name={ê±´ë¬¼ëª…}
```
- ê±´ë¬¼ëª… ë¶€ë¶„ ê²€ìƒ‰ ì§€ì›
- ì—°ê´€ëœ ëª¨ë“  Vertex ì •ë³´ ë°˜í™˜

### 3. ê²½ë¡œ ê²°ê³¼ ì œê³µ
- ì¶œë°œì§€/ë„ì°©ì§€ ì •ë³´
- ê²½ìœ  ì§€ì  ë¦¬ìŠ¤íŠ¸  
- ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ë¶„ ë‹¨ìœ„)
- ìƒì„¸ ê²½ë¡œ ì¢Œí‘œ (InnerVertex)

## ğŸ“Š **ë°ì´í„° ëª¨ë¸ë§**

### Building (ê±´ë¬¼)
- ê±´ë¬¼ ê³ ìœ  ì •ë³´ (ì´ë¦„, ì„¤ëª…)

### Vertex (ìœ„ì¹˜ ë…¸ë“œ)  
- GPS ì¢Œí‘œ (ìœ„ë„, ê²½ë„)
- ì†Œì† ê±´ë¬¼ ì •ë³´

### Edge (ê²½ë¡œ ê°„ì„ )
- ì‹œì‘ì /ë„ì°©ì  Vertex
- ê±°ë¦¬, ì†Œìš”ì‹œê°„, ì˜¤ë¥´ë§‰ ì—¬ë¶€
- ë²„ìŠ¤ ê²½ë¡œ êµ¬ë¶„
- ìƒì„¸ ê²½ë¡œ ì¢Œí‘œ ë¬¸ìì—´

## ğŸ¯ **í”„ë¡œì íŠ¸ ì„±ê³¼**
- **2ì¼ í•´ì»¤í†¤ ì™„ì£¼**: ì œí•œëœ ì‹œê°„ ë‚´ MVP ì„œë¹„ìŠ¤ ì„±ê³µì  êµ¬í˜„
- **ì‹¤ìš©ì  ì•Œê³ ë¦¬ì¦˜ ì ìš©**: ì´ë¡ ì  ì§€ì‹ì„ ì‹¤ì œ ì„œë¹„ìŠ¤ì— í™œìš©
- **íš¨ìœ¨ì  ë°ì´í„° ëª¨ë¸ë§**: ë³µì¡í•œ ì§€ë¦¬ ì •ë³´ë¥¼ ê´€ê³„í˜• DBë¡œ ì„¤ê³„
- **íŒ€ í˜‘ì—… ê²½í—˜**: ë‹¤ì–‘í•œ ì§êµ°ê³¼ì˜ í˜‘ì—…ì„ í†µí•œ ì„œë¹„ìŠ¤ ì™„ì„±

## ğŸ“ **í”„ë¡œì íŠ¸ êµ¬ì¡°**
```
src/main/java/it/demo/
â”œâ”€â”€ building/          # ê±´ë¬¼ ì—”í‹°í‹°
â”œâ”€â”€ vertex/           # ìœ„ì¹˜ ë…¸ë“œ ì—”í‹°í‹°  
â”œâ”€â”€ edge/             # ê²½ë¡œ ê°„ì„  ì—”í‹°í‹°
â”œâ”€â”€ repository/       # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”œâ”€â”€ service/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜)
â”œâ”€â”€ controller/       # REST API ì»¨íŠ¸ë¡¤ëŸ¬
â””â”€â”€ DemoApplication.java
```

## ğŸ› ï¸ **ì‹¤í–‰ ë°©ë²•**
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜ ë° ë¹Œë“œ
./gradlew build

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
./gradlew bootRun
```

**ê°œë°œí™˜ê²½**: Java 21, MariaDB, Spring Boot 3.2.3

## Backend íŒŒì¼ êµ¬ì¡°
```
ğŸ“¦src
 â”£ ğŸ“‚main
 â”ƒ â”£ ğŸ“‚java
 â”ƒ â”ƒ â”— ğŸ“‚it
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚demo
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚building
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œBuilding.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚controller
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œEdgeController.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œVertexController.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚edge
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œCustomWeightEdge.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œEdge.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œPathResult.java 
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚repository
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œBuildingRepository.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œEdgeRepository.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œVertexRepository.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚service
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œEdgeBusService.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œEdgeService.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚vertex
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œInnerVertex.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œVertex.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œDemoApplication.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œServletInitializer.java
 â”ƒ â”— ğŸ“‚resources
 â”ƒ â”ƒ â”£ ğŸ“‚static
 â”ƒ â”ƒ â”£ ğŸ“‚templates
 â”ƒ â”ƒ â”— ğŸ“œapplication.properties
 â”— ğŸ“‚test
 â”ƒ â”— ğŸ“‚java
 â”ƒ â”ƒ â”— ğŸ“‚it
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚demo
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚algoTest
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œfindRouteServiceTest.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚domain
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œDemoApplicationTests.java
```


## ER Diagram

<img width="593" alt="image" src="https://github.com/yudility/it/assets/78692557/130f5a39-586b-4fde-b0a2-a8689338fbda">



## API
### 1. ì´ë¦„ìœ¼ë¡œ ê±´ë¬¼ ì¡°íšŒ

### `point/find?name = â€œê±´ë¬¼ì´ë¦„â€`

- íŒŒë¼ë¯¸í„°
> - (String) name : ê±´ë¬¼ëª…
- ë¦¬í„´ê°’
> - Vertex ê°ì²´ list

- ì¡°íšŒ ì„±ê³µ ì‹œ
>   localhost:8080/point/find?name=tes

```json
[
    {
        "id": 1,
        "latitude": 10.0,
        "longitude": 10.0,
        "building": {
            "id": 1,
            "name": "test\r\n",
            "info": null
        },
        "idAsString": "1"
    },
    {
        "id": 2,
        "latitude": 5.5,
        "longitude": 3.0,
        "building": {
            "id": 2,
            "name": "test1",
            "info": null
        },
        "idAsString": "2"
    },
    {
        "id": 3,
        "latitude": 2.6,
        "longitude": 111.0,
        "building": {
            "id": 3,
            "name": "test2",
            "info": null
        },
        "idAsString": "3"
    }
]
```

- ì¡°íšŒ ì‹¤íŒ¨ ì‹œ
> localhost:8080/point/find?name=ji

```java
[]
```

## 2. ì¶œë°œì§€/ë„ì°©ì§€ ì´ë¦„ìœ¼ë¡œ ìµœë‹¨ ê²½ë¡œ ì¡°íšŒ

### `route/find?start = "ì¶œë°œì§€ê±´ë¬¼ëª…" & end ="ë„ì°©ì§€ê±´ë¬¼ëª…"`

- íŒŒë¼ë¯¸í„°
>    - (String) start :  ì¶œë°œì§€ ê±´ë¬¼ëª…
>    - (String) end : ë„ì°©ì§€ ê±´ë¬¼ëª…
- ë¦¬í„´ê°’
>    - Start ì¶œë°œì§€
>        - vertex id
>        - latitude : ìœ„ë„
>        - longitude : ê²½ë„
>        - building : ê±´ë¬¼
>            - id : ê±´ë¬¼ ID
>            - name : ê±´ë¬¼ëª…
>            - info : ì •ë³´
>    - End ë„ì°©ì§€
>        - ì´ë¦„
>        - ìœ„ë„
>        - ê²½ë„
>        - ê±´ë¬¼
>            - ê±´ë¬¼ ID
>            - ê±´ë¬¼ëª…
>            - ì •ë³´
>    - vertexList ì¢Œí‘œ(ì ) List
>        - vertex id
>        - latitude ìœ„ë„
>        - longitude ê²½ë„
>        - building ê±´ë¬¼
>            - id ê±´ë¬¼ ID
>            - name ê±´ë¬¼ëª…
>            - info ì •ë³´

- ì¡°íšŒ ì„±ê³µ ì‹œ
> localhost:8080/route/find?start=ì •ë¬¸&end=ì•„ì‚°ê³µí•™ê´€
```json
{
    "start": {
        "id": 1,
        "latitude": 37.55926864600008,
        "longitude": 126.9457978910001,
        "building": {
            "id": 1,
            "name": "ì •ë¬¸",
            "info": null
        }
    },
    "end": {
        "id": 146,
        "latitude": 37.56645861900006,
        "longitude": 126.94844940400003,
        "building": {
            "id": 62,
            "name": "ì•„ì‚°ê³µí•™ê´€",
            "info": null
        }
    },
    "vertexList": [
        {
            "id": 1,
            "latitude": 37.55926864600008,
            "longitude": 126.9457978910001,
            "building": {
                "id": 1,
                "name": "ì •ë¬¸",
                "info": null
            }
        },
        {
            "id": 2,
            "latitude": 37.56001399500008,
            "longitude": 126.94567690500003,
            "building": null
        },
        {
            "id": 84,
            "latitude": 37.561321933000045,
            "longitude": 126.94679141100005,
            "building": null
        },
        {
            "id": 85,
            "latitude": 37.56169943800006,
            "longitude": 126.94729475100007,
            "building": null
        },
        {
            "id": 87,
            "latitude": 37.561901404000025,
            "longitude": 126.94743096700006,
            "building": null
        },
        {
            "id": 86,
            "latitude": 37.562160608000056,
            "longitude": 126.94700962400009,
            "building": null
        },
        {
            "id": 55,
            "latitude": 37.56233325900007,
            "longitude": 126.94714351400012,
            "building": null
        },
        {
            "id": 54,
            "latitude": 37.56289048100007,
            "longitude": 126.94735530800006,
            "building": null
        },
        {
            "id": 53,
            "latitude": 37.56311035900006,
            "longitude": 126.94730913300009,
            "building": null
        },
        {
            "id": 56,
            "latitude": 37.563318897000045,
            "longitude": 126.94783952700004,
            "building": null
        },
        {
            "id": 57,
            "latitude": 37.56364550700005,
            "longitude": 126.94814407000001,
            "building": null
        },
        {
            "id": 58,
            "latitude": 37.563813226000036,
            "longitude": 126.94800724600009,
            "building": null
        },
        {
            "id": 59,
            "latitude": 37.56391032700003,
            "longitude": 126.94794545500008,
            "building": null
        },
        {
            "id": 115,
            "latitude": 37.563993793000066,
            "longitude": 126.94785120100005,
            "building": {
                "id": 58,
                "name": "ì¢…í•©ê³¼í•™ê´€ Aë™",
                "info": null
            }
        },
        {
            "id": 114,
            "latitude": 37.564334305000045,
            "longitude": 126.94746116100009,
            "building": {
                "id": 59,
                "name": "ì¢…í•©ê³¼í•™ê´€ Bë™",
                "info": null
            }
        },
        {
            "id": 141,
            "latitude": 37.56427751000007,
            "longitude": 126.94780991800008,
            "building": null
        },
        {
            "id": 150,
            "latitude": 37.56467861600004,
            "longitude": 126.94809438700008,
            "building": null
        },
        {
            "id": 148,
            "latitude": 37.56489176100007,
            "longitude": 126.94797305500003,
            "building": null
        },
        {
            "id": 147,
            "latitude": 37.56511690100007,
            "longitude": 126.94801810900003,
            "building": null
        },
        {
            "id": 145,
            "latitude": 37.56629442600007,
            "longitude": 126.94875809000007,
            "building": null
        },
        {
            "id": 146,
            "latitude": 37.56645861900006,
            "longitude": 126.94844940400003,
            "building": {
                "id": 62,
                "name": "ì•„ì‚°ê³µí•™ê´€",
                "info": null
            }
        }
    ],
    "innerVertices": null,
    "minutes": 12
}
```
